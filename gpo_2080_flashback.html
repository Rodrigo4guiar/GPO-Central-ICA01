<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GPO 2080 - Atmosfera Flashback</title>
    <style>
        body { margin: 0; background: #020508; overflow: hidden; font-family: 'Courier New', monospace; }
        canvas { display: block; }
        #ui { position: absolute; top: 20px; left: 20px; color: #0ff; text-shadow: 0 0 10px #0ff; pointer-events: none; }
    </style>
</head>
<body>
    <div id="ui">
        <div>AURA01 CORE - STATUS: ATIVO</div>
        <div>SETOR 4: BECO CHUVOSO - 2080</div>
        <div id="log">[ANOMALIA DETECTADA]</div>
    </div>
    <canvas id="gameCanvas"></canvas>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const player = {
            x: 100,
            y: canvas.height - 120,
            width: 30,
            height: 60,
            color: '#ffcc00', // Jaqueta Amarela
            speed: 5
        };

        const raindrops = [];
        for(let i = 0; i < 200; i++) {
            raindrops.push({
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height,
                length: Math.random() * 20 + 10,
                speed: Math.random() * 10 + 10,
                opacity: Math.random() * 0.5 + 0.1, // Camadas de profundidade
                depth: Math.random() // 0 = fundo, 1 = frente
            });
        }

        function drawRain(depthLayer) {
            raindrops.forEach(drop => {
                // Desenha apenas as gotas da camada solicitada
                if ((depthLayer === 'back' && drop.depth < 0.5) || 
                    (depthLayer === 'front' && drop.depth >= 0.5)) {
                    
                    ctx.strokeStyle = `rgba(174, 194, 224, ${drop.opacity})`;
                    ctx.lineWidth = drop.depth * 1.5; // Gotas na frente são mais grossas
                    ctx.beginPath();
                    ctx.moveTo(drop.x, drop.y);
                    ctx.lineTo(drop.x + 2, drop.y + drop.length);
                    ctx.stroke();
                }
                
                // Update apenas uma vez por frame
                if (depthLayer === 'front') {
                    drop.y += drop.speed * (drop.depth + 0.5); // Gotas na frente caem mais rápido
                    drop.x += 1;
                    if (drop.y > canvas.height) {
                        drop.y = -20;
                        drop.x = Math.random() * canvas.width;
                    }
                }
            });
        }

        function drawBackground() {
            // Céu profundo
            ctx.fillStyle = '#020508';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Prédios ao fundo (Silhuetas)
            ctx.fillStyle = '#050a0f';
            ctx.fillRect(200, canvas.height - 400, 100, 340);
            ctx.fillRect(500, canvas.height - 550, 180, 490);
            ctx.fillRect(800, canvas.height - 450, 120, 390);

            // Janelas distantes (luzes)
            ctx.fillStyle = 'rgba(0, 255, 204, 0.2)';
            ctx.fillRect(220, canvas.height - 380, 10, 10);
            ctx.fillRect(550, canvas.height - 520, 10, 10);
            
            drawRain('back'); // Chuva atrás dos prédios/objetos

            // Chão molhado
            ctx.fillStyle = '#050505';
            ctx.fillRect(0, canvas.height - 60, canvas.width, 60);
        }

        function update() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawBackground();
            drawPlayer();
            drawRain('front'); // Chuva na frente do personagem
            requestAnimationFrame(update);
        }

        window.addEventListener('keydown', (e) => {
            if(e.key === 'ArrowRight') player.x += player.speed;
            if(e.key === 'ArrowLeft') player.x -= player.speed;
        });

        update();
    </script>
</body>
</html>